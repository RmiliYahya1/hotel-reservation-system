<Window x:Class="hotel_reservation_desktop_app.View.GestionReservation.Reservations"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:hotel_reservation_desktop_app.View.GestionReservation" 
        xmlns:viewmodels="clr-namespace:hotel_reservation_desktop_app.ViewModels"   
        xmlns:converters="clr-namespace:hotel_reservation_desktop_app.Converters"
        d:DataContext="{d:DesignInstance Type=viewmodels:ReservationViewModel}"
        mc:Ignorable="d"
        Title="Reservations" Height="450" Width="700">

    <Window.Resources>
        <converters:StatusToVisibilityConverter x:Key="StatusToVisibilityConverter" />
    </Window.Resources>


    <Grid Margin="0,0,0,0">
        <StackPanel Orientation="Vertical">
            <!-- Tableaux des réservations -->

            <Grid>
                <!-- Boutons pour les actions -->
                <!-- Tableaux des réservations -->
                <DataGrid 
                      AutoGenerateColumns="False"
                      ItemsSource="{Binding Reservations}"
                      SelectedItem="{Binding SelectedReservation}"
                      SelectionMode="Single"
                      Height="300" Margin="20,60,20,-60" HorizontalGridLinesBrush="#FFE31717">
                    <DataGrid.AlternatingRowBackground>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="Black"/>
                            <GradientStop Color="#FFB48E8E" Offset="1"/>
                        </LinearGradientBrush>
                    </DataGrid.AlternatingRowBackground>
                    <DataGrid.CellStyle>
                        <Style/>
                    </DataGrid.CellStyle>

                    <DataGrid.Columns>
                        <DataGridTextColumn IsReadOnly="True" Header="Date" Binding="{Binding Date}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Check-In" Binding="{Binding CheckInDate}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Check-Out" Binding="{Binding CheckOutDate}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Client" Binding="{Binding Client.FullName}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Room" Binding="{Binding Room.Number}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Price" Binding="{Binding Price}" />
                        <DataGridTextColumn IsReadOnly="True" Header="Status" Binding="{Binding Status}"/>
                        <DataGridTemplateColumn Header="Paiement">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <!-- Bouton "View Payment" -->
                                        <Button Content="View Payment"
                        Command="{Binding DataContext.ViewPaymentCommand, RelativeSource={RelativeSource AncestorType=Window}}" 
                        CommandParameter="{Binding}"
                        Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter=Paid}" />

                                        <!-- Bouton "Pay" -->
                                        <Button Content="Pay"
                        Command="{Binding DataContext.AddPaymentCommand, RelativeSource={RelativeSource AncestorType=Window}}" 
                        CommandParameter="{Binding}"
                        Visibility="{Binding Status, Converter={StaticResource StatusToVisibilityConverter}, ConverterParameter= Not Paid}" />
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>


                        <DataGridTemplateColumn Header="Opérations" IsReadOnly="True" Width="auto">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="Modifier" Width="100"
                        Command="{Binding DataContext.EditReservationCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        CommandParameter="{Binding}" />
                                        <Button Content="Supprimer" Click="Supprimer_Button_Click" Width="100"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>
                </DataGrid>
                <Label Content="Liste des réservation" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" FontSize="20" FontWeight="Bold" FontFamily="Bahnschrift SemiCondensed" Foreground="#FF2690D8"/>
            </Grid>


            <!-- Boutons pour les actions -->
            <Grid>

            <Button Content="Ajouter" Click="Ajouter_Button_Click" Width="100" Margin="578,-282,22,282" Background="#FF22BAE3" Foreground="#FF1734CA" Height="25" />
            </Grid>

        </StackPanel>
    </Grid>
</Window>
